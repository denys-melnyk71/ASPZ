## Завдання:
 Напишіть програму, яка 
 - від імені root копіює файл, який вона перед цим створила від імені звичайного користувача. 
 - Потім вона повинна помістити копію у домашній каталог звичайного користувача.
 - Далі, використовуючи звичайний обліковий запис, програма намагається змінити файл і зберегти зміни. Що відбудеться?
 - Після цього програма намагається видалити цей файл за допомогою команди rm. Що відбудеться?

## Звіт:

__Примітка__: програму слід компілювати та запускати з правами root
```
denys@ASPZ:~/PWs/ASPZ/9/task 9.3 $ sudo gcc -Wall main.c -o main
denys@ASPZ:~/PWs/ASPZ/9/task 9.3 $ sudo ./main
```

Оскільки програма запускається з правами root, в самому коді програми треба передбачити перемикання на звичайного користувача і назад. Я використав seteuid() та setegid() для переключення на UID/GID звичайного користувача, а потім повертався до root через seteuid(0). 

Після копіювання файл недоступний для користувача, тому треба
- змінити власника на UID користувача:
```c
if (chown(DEST_FILE, user_uid, user_gid) != 0)
    error_exit("chown");
```
- встановити права `rw-------`
```c
if (chmod(DEST_FILE, S_IRUSR | S_IWUSR) != 0)
    error_exit("chmod");
```

### Результат:
```
Password:
[User] Створюємо файл: /tmp/userfile.txt
[User] Файл створено.
[Root] Копіюємо /tmp/userfile.txt до /home/denys/copied_by_root.txt
[Root] Копіювання завершено. Власник: UID=1001, права: rw-------
[+] Завершено. Ви можете перевірити файл /home/denys/copied_by_root.txt як звичайний користувач.
denys@ASPZ:~/PWs/ASPZ/9/task 9.3 $ sudo gcc -Wall main.c -o main
denys@ASPZ:~/PWs/ASPZ/9/task 9.3 $ sudo ./main
=== Етап 1: Створення файлу користувачем ===
[User] Створюємо файл: /tmp/userfile.txt
[User] Файл створено.

=== Етап 2: Копіювання файлу від імені root ===
[Root] Копіюємо /tmp/userfile.txt до /home/denys/copied_by_root.txt
[Root] Копіювання завершено. Власник: UID=1001, права: rw-------

=== Етап 3: Модифікація файлу як користувач ===
[User] Спроба змінити файл /home/denys/copied_by_root.txt
[User] Зміни збережено успішно.

=== Етап 4: Видалення файлу як користувач ===
[User] Спроба видалити файл /home/denys/copied_by_root.txt
[User] Файл успішно видалено.

[+] Готово.
denys@ASPZ:~/PWs/ASPZ/9/task 9.3 $ sudo gcc -Wall main.c -o main
Password:
denys@ASPZ:~/PWs/ASPZ/9/task 9.3 $ sudo ./main
=== Етап 1: Створення файлу користувачем ===
[User] Створюємо файл: /tmp/userfile.txt
[User] Файл створено.

=== Етап 2: Копіювання файлу від імені root ===
[Root] Копіюємо /tmp/userfile.txt до /home/denys/copied_by_root.txt
[Root] Копіювання завершено. Власник: UID=1001, права: rw-------

=== Етап 3: Модифікація файлу як користувач ===
[User] Спроба змінити файл /home/denys/copied_by_root.txt
[User] Зміни збережено успішно.

=== Етап 4: Видалення файлу як користувач ===
[User] Спроба видалити файл /home/denys/copied_by_root.txt за допомогою команди rm
[User] Файл успішно видалено командою rm.

[+] Готово.
```

### Відповідь на питання:
- Далі, використовуючи звичайний обліковий запис, програма намагається змінити файл і зберегти зміни. Що відбудеться? __Зміни збережуться__
- Після цього програма намагається видалити цей файл за допомогою команди rm. Що відбудеться? __Файл успішно видалиться__